<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="c1"># Create Order (POST )</span>
<span class="k">def</span> <span class="nf">send_request</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'http://localhost:3000/api/orders'</span><span class="p">)</span>

  <span class="c1"># Create client</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">body</span> <span class="o">=</span> <span class="s2">"{
 'data': {
    'type': 'orders',
    'attributes': {
      'vendor-po': '1480697676',
      'shipping-method': 'SAMPLE',
     'shipping-account-number': '1234'
    }
  },
  'included': [
    {
      'type': 'shipping-address',
      'attributes': {
    'name': 'Phillip J. Fry',
        'address': '123 Green St.</span><span class="se">\\</span><span class="s2">nSuite 321',
        'city': 'New New York',
        'state': 'NY',
        'postal-code': '10012'
      }
    },
    {
      'type': 'billing-address'
      'attributes': {
    'name': 'Hubert Farnsworth',
        'address': '123 Green St.</span><span class="se">\\</span><span class="s2">nSuite 321',
        'city': 'New New York',
        'state': 'NY',
        'postal-code': '10012'
      }
    },
    {
      'type': 'return-address',
      'attributes': {
    'name': 'Bender B. Rodriguez',
        'address': '123 Green St.</span><span class="se">\\</span><span class="s2">nSuite 321',
        'city': 'New New York',
        'state': 'NY',
        'postal-code': '10012'
      }
    },
    {
      'type': 'line-items',
      'attributes': {
        'line-number': 1,
        'quantity': 2,
        'description': 'It's not sò fluffy!',
        'product-code': '3PF-PSY-SQPGZ2C',
        'item-properties': {
          'thread-color': 'white',
          'blah': 'blah-2'
        },
        'designs': [
          {
            'image_remote_url': 'http://images.apple.com/v/home/cj/images/promos/ipad_pro_large.jpg',
            'position': 'centered',
            'crop': 'left'
          }
        ]
      }
    },
    {
      'type': 'line-items',
      'attributes': {
        'line-number': 2,
        'quantity': 5,
        'description': 'It's sò fluffy!',
        'product-code': '3PF-PJT-SLPG4CW',
        'item-properties': {
          'thread-color': 'white',
          'blah': 'blah-2'
        },
        'designs': [
          {
            'image_remote_url': 'http://images.apple.com/v/home/cj/images/heros/iphone-6s-change_xlarge.jpg'
          }
        ]
      }
    },
    {
      'type': 'packing-list',
       'attributes': {
    'url': 'http://www.akapparel.com/assets/production-pdf/110-160511-050-2.pdf'
       }
      },
      {
         'type': 'shipping-label',
      'attributes': {
         'url': 'https://hellofabric.com/assets/mww/orders/86667297/56d712af0897d-86667297-MWWA1411.png'
      }

      }
  ]
}"</span>

  <span class="c1"># Create Request</span>
  <span class="n">req</span> <span class="o">=</span>  <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Content-Type"</span><span class="p">,</span> <span class="s2">"application/vnd.api+json"</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Authorization"</span><span class="p">,</span> <span class="s2">"auth-key=S@mpl3!"</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Accept"</span><span class="p">,</span> <span class="s2">"application/vnd.api+json; version=1"</span>
  <span class="c1"># Set body</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">body</span>

  <span class="c1"># Fetch Request</span>
  <span class="n">res</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Response HTTP Status Code: </span><span class="si">#{</span><span class="n">res</span><span class="p">.</span><span class="nf">code</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Response HTTP Response Body: </span><span class="si">#{</span><span class="n">res</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">StandardError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="s2">"HTTP Request failed (</span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">)"</span>
<span class="k">end</span>
</code></pre>
